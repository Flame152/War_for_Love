(()=>{"use strict";let t=!1;setTimeout((()=>{if(t){let t=new Event("windowScroll");window.addEventListener("scroll",(function(e){document.dispatchEvent(t)}))}}),0);const e=document.querySelector(".audio");e.querySelector("audio"),new class{constructor(t,e){this.options=Object.assign({onend:function(){}},e),this.audio=t,this.audioElement=this.audio.querySelector("audio"),this.audioSlide=this.audio.querySelector(".audio__slide"),this.track=this.audio.querySelector(".audio__track"),this.button=this.audio.querySelector(".audio__button"),this.progress=this.audioElement.currentTime,this.duration=this.audioElement.duration,this.init()}init(){this.times={current:this.audio.querySelector(".audio__current"),total:this.audio.querySelector(".audio__total")},this.eventsFunction(),window.requestAnimationFrame(this.events.checkProgress),this.setTime()}setTime(){this.totalTime=this.audioElement.duration,this.times.current.innerHTML=this.convertTime(this.progress),this.times.total.innerHTML=this.convertTime(this.totalTime)}resetTrack(){this.audioElement.currentTime=0,this.setVarProgress(),this.stop()}stop(){this.setStateButton(this.button,"play"),this.audioElement.pause()}play(){this.setStateButton(this.button,"paused"),this.audioElement.play()}eventsFunction(){this.events={checkProgress:this.checkProgress.bind(this),start:this.eventDown.bind(this),end:this.eventUp.bind(this),move:this.eventMove.bind(this)},this.audio.addEventListener("pointerdown",this.events.start)}eventDown(t){const e=t.target,i=e.closest(".audio__button"),s=e.closest(".audio__track");if(i){switch(i.dataset.type){case"play":this.play();break;case"paused":this.stop()}}else if(s){window.requestAnimationFrame(this.events.checkProgress);let e=this.setDelta(t.pageX);this.progress=this.audioElement.currentTime=e*this.totalTime/this.track.offsetWidth,this.setVarProgress(),this.audio.addEventListener("pointermove",this.events.move),this.audio.addEventListener("pointerup",this.events.end)}}eventUp(){this.audio.removeEventListener("pointerup",this.events.end),this.audio.removeEventListener("pointermove",this.events.move)}eventMove(t){let e=this.setDelta(t.pageX);return this.audioElement.currentTime=e*this.totalTime/this.track.offsetWidth,this.setVarProgress(),t.stopPropagation(),t.preventDefault(),!1}setDelta(t){return t-this.track.getBoundingClientRect().left<0?0:t>this.track.offsetWidth+this.track.getBoundingClientRect().left?this.track.offsetWidth:t-this.track.getBoundingClientRect().left}setStateButton(t,e){t.setAttribute("data-type",e)}checkProgress(){this.progress=this.audioElement.currentTime,this.setVarProgress(),this.setTime(),console.log(this.audioElement.paused),this.audioElement.paused?this.stop():this.play(),this.audioElement.currentTime>=this.audioElement.duration?(this.options.onend(this),document.dispatchEvent(new CustomEvent("onend",{detail:{audio:this}})),this.stop(),window.cancelAnimationFrame(this.events.checkProgress)):window.requestAnimationFrame(this.events.checkProgress)}setVarProgress(){let t=this.progress/this.totalTime*100;console.log(this.progress),this.audio.style.setProperty("--progress",`${Math.trunc(t)}%`);let e=100*this.audioSlide.offsetWidth/this.track.offsetWidth;this.audioSlide.style.left=Math.trunc(t)-e*Math.trunc(t)/100+"%"}convertTime(t){const e=Math.floor(t/60/60)>0?`${Math.floor(t/60/60)}.`:"";return`${e}${Math.floor(t/60)-60*e>0?Math.floor(t/60)-60*e+".":"0."}${Math.trunc(t%60)>0?`${Math.trunc(t%60)}`:0}`}}(e,{onend:t=>{console.log("end")}});window.addEventListener("load",(function(t){document.querySelector(".swiper")&&new Swiper(".swiper",{slidesPerView:3,spaceBetween:0,autoHeight:!0,speed:800,loop:!0,navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"},breakpoints:{320:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:2,spaceBetween:20},992:{slidesPerView:3,spaceBetween:30},1268:{slidesPerView:3}},on:{}})})),window.FLS=!0,function(t){let e=new Image;e.onload=e.onerror=function(){t(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(t){let e=!0===t?"webp":"no-webp";document.documentElement.classList.add(e)}))})();